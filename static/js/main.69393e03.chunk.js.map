{"version":3,"sources":["app-components/home.js","app-components/screenshotter.js","app-components/sign-up-form.js","App.js","index.js"],"names":["mapboxgl","accessToken","process","Map","Component","constructor","props","super","this","state","lng","lat","zoom","mapContainer","React","createRef","componentDidMount","map","container","current","style","center","scale","ScaleControl","maxWidth","unit","addControl","setUnit","async","resp","fetch","json","loadData","then","console","log","addSource","type","data","addLayer","bounds","turf","fitBounds","padding","duration","render","ref","className","Home","loaded","params","window","location","hash","replace","split","p","reduce","obj","key","value","returnCoords","string","array","parseFloat","setTimeout","screenshot","reload","customData","userLoc","customDataFire","fireLoc","on","id","source","layout","paint","decodeURI","userLocName","fireLocName","bboxJson","features","Div","document","createElement","getElementsByClassName","appendChild","postDiv","Screenshotter","Form","username","phoneNumber","radius","coordinates","handleChange","bind","handleSubmit","event","setState","target","name","address","token","method","body","JSON","stringify","response","alert","preventDefault","onSubmit","onChange","SignUpForm","App","PureComponent","exact","path","element","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.69393e03.chunk.js","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport * as turf from '@turf/turf';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_KEY;\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: -98.78320225360663,\n      lat: 40.45646421496375, \n      zoom: 3.5\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  componentDidMount() {\n    const { lng, lat, zoom } = this.state;\n    const map = new mapboxgl.Map({\n      container: this.mapContainer.current,\n      style: 'mapbox://styles/caseymmiler/cl11818ga000216ng2az1efhm',\n      center: [lng, lat],\n      zoom: zoom\n    });\n\n    const scale = new mapboxgl.ScaleControl({\n      maxWidth: 150,\n      unit: 'imperial'\n    });\n    map.addControl(scale);\n      \n    scale.setUnit('imperial');\n\n    async function loadData() {\n      const resp = await fetch('https://firenearby.s3.amazonaws.com/latest.json');\n      const json = await resp.json();\n      return json;\n    }\n\n    loadData().then(json => {\n      // map.on('load', function () {\n      console.log('ran load')\n      map.addSource('data-json', {\n        type: 'geojson',\n        data: json,\n      });\n\n      // console.log(json)\n\n      map.addLayer({\n        'id': 'points',\n        'type': 'symbol',\n        'source': 'data-json',\n        'layout': {\n          'icon-image': 'orange-x-box2',\n          'text-field': ['get', 'IncidentName'],\n          'text-font': [\n            'Ubuntu Mono Bold',\n            'Arial Unicode MS Bold'\n          ],\n          'text-size': 16,\n          'text-offset': [0, 1.25],\n          'text-anchor': 'top',\n          'icon-allow-overlap': true,\n          'text-allow-overlap': true\n        }\n      });\n      \n      const bounds = turf.bbox(json);\n      map.fitBounds(bounds, { padding: 100, duration: 0 });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div ref={this.mapContainer} className=\"map-container\" />\n      </div>\n    );\n  }\n}\n\nconst Home = (props) => {\n   return(\n    <Map />\n   )\n}\n \nexport default Home;","import React from 'react';\nimport { Component } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport * as turf from '@turf/turf';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_KEY;\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: -98.78320225360663,\n      lat: 40.45646421496375, \n      zoom: 3.5\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  componentDidMount() {\n    const { lng, lat, zoom } = this.state;\n    let loaded = false;\n    const map = new mapboxgl.Map({\n      container: this.mapContainer.current,\n      style: 'mapbox://styles/caseymmiler/cl11818ga000216ng2az1efhm',\n      center: [lng, lat],\n      zoom: zoom\n    });\n\n    const scale = new mapboxgl.ScaleControl({\n      maxWidth: 150,\n      unit: 'imperial'\n    });\n    map.addControl(scale);\n\n    // ?userLoc=xx,xx&fireLoc=xx,xx\n    const params = window.location.hash\n    .replace('#/screenshot?', '')\n    .split('&')\n    .map((p) => p.split('='))\n    .reduce((obj, [key, value]) => ({ ...obj, [key]: value }), {});\n\n    const returnCoords = (string) => {\n      let array = string.split(',');\n      console.log(array)\n      return [parseFloat(array[0]), parseFloat(array[1])];\n    }\n\n    console.log(params);\n\n    const postDiv = () => {\n      console.log('loaded')\n      // signal done\n      const Div = document.createElement('div');\n      Div.id = 'hidden';\n      document.getElementsByClassName('map-container')[0].appendChild(Div);\n    }\n\n    setTimeout(function(){\n      if(!loaded && params.screenshot){\n        window.location.reload();\n      }\n    }, 3000)\n\n    const customData = {\n      \"type\": \"FeatureCollection\",\n      \"features\": [\n        {\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"category\": \"userLoc\"\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": returnCoords(params.userLoc)\n          }\n        }\n      ]\n    };\n\n    const customDataFire = {\n      \"type\": \"FeatureCollection\",\n      \"features\": [\n        {\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"category\": \"fireLoc\"\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": returnCoords(params.fireLoc)\n          }\n        }\n      ]\n    };\n\n    map.on('load', function () {\n      console.log('ran load')\n      loaded = true;\n\n      map.addSource('data-json', {\n        type: 'geojson',\n        data: customData\n      });\n\n      map.addLayer({\n        id: 'data-json-layer',\n        type: 'circle',\n        source: 'data-json', // reference the data source\n        layout: {},\n        paint: {\n          'circle-radius': 7,\n          'circle-color': '#5444e3',\n          'circle-stroke-color': '#ffffff',\n          'circle-stroke-width': 2\n        },\n      });\n\n      map.addLayer({\n        id: 'data-json-layer-text',\n        type: 'symbol',\n        source: 'data-json', // reference the data source\n        layout: {\n          'text-field': decodeURI(params.userLocName),\n          'text-font': [\n            'Ubuntu Mono Bold',\n            'Arial Unicode MS Bold'\n          ],\n          'text-size': 18,\n          'text-offset': [0, 1],\n          'text-anchor': 'top'\n        }\n      });\n\n      map.addSource('data-json-fire', {\n        type: 'geojson',\n        data: customDataFire\n      });\n\n      // Add a symbol layer\n      map.addLayer({\n        'id': 'points',\n        'type': 'symbol',\n        'source': 'data-json-fire',\n        'layout': {\n          'icon-image': 'orange-x-box2',\n          // get the title name from the source's \"title\" property\n          'text-field': decodeURI(params.fireLocName),\n          'text-font': [\n            'Ubuntu Mono Bold',\n            'Arial Unicode MS Bold'\n          ],\n          'text-size': 18,\n          'text-offset': [0, 1.25],\n          'text-anchor': 'top'\n        }\n      });\n\n      const bboxJson = {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n          customData.features[0],\n          customDataFire.features[0]\n        ]\n      }\n          \n      const bounds = turf.bbox(bboxJson);\n      map.fitBounds(bounds, { padding: 120, duration: 0 });\n      if(params.screenshot){\n        setTimeout(function(){\n          console.log('posting div');\n          postDiv();\n        }, 5000)\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div ref={this.mapContainer} className=\"map-container\" />\n      </div>\n    );\n  }\n}\n\nconst Screenshotter = (props) => {\n   return(\n    <Map />\n   )\n}\n \nexport default Screenshotter;","import React from 'react';\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      location: '',\n      phoneNumber: '',\n      radius: '',\n      coordinates: ''\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    const address = this.state.location;\n    \n    async function loadData(address) {\n      const token = process.env.REACT_APP_MAPBOX_KEY;\n      console.log(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?types=place%2Cpostcode%2Caddress&access_token=${token}`)\n      const resp = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?types=place%2Cpostcode%2Caddress&access_token=${token}`);\n      const json = await resp.json();\n      return json;\n    }\n\n    loadData(address).then(json => {\n      this.state.coordinates = json.features[0].center;\n      // POST\n      fetch(process.env.REACT_APP_API_URL, {\n        method: 'POST',\n        body: JSON.stringify(this.state),\n      }).then((response) => {\n        // console.log(response);\n        alert('Your information has been submitted');\n      });\n    })\n    event.preventDefault();\n  }\n\n\n  render() {\n    return (\n      <div className=\"signup\">\n        <h1>Sign up for alerts</h1>\n        <p>Please submit this form to sign up for text alerts of fires near your specified location.</p>\n        <form onSubmit={this.handleSubmit}>\n          <label>\n            Name:\n            <input type=\"text\" name='username' value={this.state.username} onChange={this.handleChange} />\n          </label>\n          <label>\n            Phone number:\n            <input type=\"text\" name='phoneNumber' value={this.state.phoneNumber} onChange={this.handleChange} />\n          </label>\n          <label>\n            Address (please include city and state):\n            <input type=\"text\" name='location' value={this.state.location} onChange={this.handleChange} />\n          </label>\n          <label>\n            Max distance (in miles):\n            <input type=\"text\" name='radius' value={this.state.radius} onChange={this.handleChange} />\n          </label>\n          <input className=\"submit\" type=\"submit\" value=\"Submit\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nconst SignUpForm = (props) => {\n   return(\n    <Form />\n   )\n}\n \nexport default SignUpForm;","import React from 'react';\nimport {\n  HashRouter,\n  Routes,\n  Route,\n} from \"react-router-dom\";\nimport './index.scss';\nimport 'dotenv/config'\n\nimport Home from './app-components/home';\nimport Screenshotter from './app-components/screenshotter';\nimport SignUpForm from './app-components/sign-up-form';\n\nexport default class App extends React.PureComponent {\n  render() {\n    return (\n      <HashRouter>\n        <Routes>\n          <Route exact path='/' element={<Home />} />\n          <Route exact path='/sign-up' element={<SignUpForm />} />\n          <Route exact path='/screenshot' element={<Screenshotter />} />\n        </Routes>\n      </HashRouter>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.scss';\nimport 'dotenv/config'\nimport App from './App';\n \nReactDOM.render(\n<React.StrictMode>\n  <App />\n</React.StrictMode>,\ndocument.getElementById('root')\n);"],"sourceRoot":""}