{"version":3,"sources":["app-components/home.js","app-components/screenshotter.js","app-components/sign-up-form.js","App.js","index.js"],"names":["mapboxgl","accessToken","process","Map","Component","constructor","props","super","this","state","lng","lat","zoom","mapContainer","React","createRef","componentDidMount","map","container","current","style","center","scale","ScaleControl","maxWidth","unit","addControl","setUnit","async","resp","fetch","json","loadData","then","console","log","addSource","type","data","addLayer","id","source","layout","paint","bounds","turf","fitBounds","padding","duration","render","ref","className","Home","loaded","params","window","location","search","slice","split","p","reduce","obj","key","value","returnCoords","string","array","parseFloat","customData","userLoc","fireLoc","on","setTimeout","Div","document","createElement","getElementsByClassName","appendChild","postDiv","Screenshotter","Form","username","phone","radius","coordinates","handleChange","bind","handleSubmit","event","setState","target","name","address","token","features","method","body","JSON","stringify","response","alert","preventDefault","onSubmit","onChange","SignUpForm","App","PureComponent","exact","path","element","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.74a9bdb5.chunk.js","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport * as turf from '@turf/turf';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_KEY;\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: -98.78320225360663,\n      lat: 40.45646421496375, \n      zoom: 3.5\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  componentDidMount() {\n    const { lng, lat, zoom } = this.state;\n    const map = new mapboxgl.Map({\n      container: this.mapContainer.current,\n      style: 'mapbox://styles/caseymmiler/cl11818ga000216ng2az1efhm',\n      center: [lng, lat],\n      zoom: zoom\n    });\n\n    const scale = new mapboxgl.ScaleControl({\n      maxWidth: 150,\n      unit: 'imperial'\n    });\n    map.addControl(scale);\n      \n    scale.setUnit('imperial');\n\n    async function loadData() {\n      const resp = await fetch('https://firenearby.s3.amazonaws.com/latest.json');\n      const json = await resp.json();\n      return json;\n    }\n\n    loadData().then(json => {\n      // map.on('load', function () {\n      console.log('ran load')\n      map.addSource('data-json', {\n        type: 'geojson',\n        data: json,\n      });\n\n      // Add a new layer to visualize the points.\n      map.addLayer({\n        id: 'data-json-layer',\n        type: 'circle',\n        source: 'data-json', // reference the data source\n        layout: {},\n        paint: {\n          'circle-radius': 5,\n          'circle-color': '#fc9403',\n          'circle-stroke-color': '#ffffff',\n          'circle-stroke-width': 2\n        },\n      });\n      \n      const bounds = turf.bbox(json);\n      map.fitBounds(bounds, { padding: 100, duration: 0 });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div ref={this.mapContainer} className=\"map-container\" />\n      </div>\n    );\n  }\n}\n\nconst Home = (props) => {\n   return(\n    <Map />\n   )\n}\n \nexport default Home;","import React from 'react';\nimport { Component } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport * as turf from '@turf/turf';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_KEY;\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: -98.78320225360663,\n      lat: 40.45646421496375, \n      zoom: 3.5\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  componentDidMount() {\n    const { lng, lat, zoom } = this.state;\n    let loaded = false;\n    const map = new mapboxgl.Map({\n      container: this.mapContainer.current,\n      style: 'mapbox://styles/caseymmiler/cl11818ga000216ng2az1efhm',\n      center: [lng, lat],\n      zoom: zoom\n    });\n\n    const scale = new mapboxgl.ScaleControl({\n      maxWidth: 150,\n      unit: 'imperial'\n    });\n    map.addControl(scale);\n\n    // ?userLoc=xx,xx&fireLoc=xx,xx\n    const params = window.location.search\n    .slice(1)\n    .split('&')\n    .map((p) => p.split('='))\n    .reduce((obj, [key, value]) => ({ ...obj, [key]: value }), {});\n\n    const returnCoords = (string) => {\n      let array = string.split(',');\n      console.log(array)\n      return [parseFloat(array[0]), parseFloat(array[1])];\n    }\n\n    console.log(params);\n\n    const postDiv = () => {\n      console.log('loaded')\n      // signal done\n      const Div = document.createElement('div');\n      Div.id = 'hidden';\n      document.getElementsByClassName('map-container')[0].appendChild(Div);\n    }\n\n    // setTimeout(function(){\n    //   if(!loaded){\n    //     window.location.reload();\n    //   }\n    // }, 3000)\n\n    const customData = {\n      \"type\": \"FeatureCollection\",\n      \"features\": [\n        {\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"category\": \"userLoc\"\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": returnCoords(params.userLoc)\n          }\n        },\n        {\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"category\": \"fireLoc\"\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": returnCoords(params.fireLoc)\n          }\n        }\n      ]\n    };\n\n    map.on('load', function () {\n      console.log('ran load')\n      loaded = true;\n\n      map.addSource('data-json', {\n        type: 'geojson',\n        data: customData\n      });\n\n      map.addLayer({\n        id: 'data-json-layer',\n        type: 'circle',\n        source: 'data-json', // reference the data source\n        layout: {},\n        paint: {\n          'circle-radius': 7,\n          'circle-color': [\n            'match',\n            ['get', 'category'],\n            'userLoc',\n            '#5444e3',\n            'fireLoc',\n            '#fc9403',\n            /* other */ '#ccc'\n          ],\n          'circle-stroke-color': '#ffffff',\n          'circle-stroke-width': 2\n        },\n      });\n    \n      const bounds = turf.bbox(customData);\n      map.fitBounds(bounds, { padding: 100, duration: 0 });\n      setTimeout(function(){\n        console.log('brb crying');\n        postDiv();\n      }, 5000)\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div ref={this.mapContainer} className=\"map-container\" />\n      </div>\n    );\n  }\n}\n\nconst Screenshotter = (props) => {\n   return(\n    <Map />\n   )\n}\n \nexport default Screenshotter;","import React from 'react';\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      location: '',\n      phone: '',\n      radius: '',\n      coordinates: ''\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    const address = this.state.location;\n    \n    async function loadData(address) {\n      const token = process.env.REACT_APP_MAPBOX_KEY;\n      console.log(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?types=place%2Cpostcode%2Caddress&access_token=${token}`)\n      const resp = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?types=place%2Cpostcode%2Caddress&access_token=${token}`);\n      const json = await resp.json();\n      return json;\n    }\n\n    loadData(address).then(json => {\n      this.state.coordinates = json.features[0].center;\n      // POST\n      fetch(process.env.REACT_APP_API_URL, {\n        method: 'POST',\n        body: JSON.stringify(this.state),\n      }).then((response) => {\n        // console.log(response);\n        alert('Your information has been submitted');\n      });\n    })\n    event.preventDefault();\n  }\n\n\n  render() {\n    return (\n      <div className=\"signup\">\n        <h1>Sign up for alerts</h1>\n        <p>Please submit this form to sign up for text alerts of fires near your specified location.</p>\n        <form onSubmit={this.handleSubmit}>\n          <label>\n            Name:\n            <input type=\"text\" name='username' value={this.state.username} onChange={this.handleChange} />\n          </label>\n          <label>\n            Phone number:\n            <input type=\"text\" name='phone' value={this.state.phone} onChange={this.handleChange} />\n          </label>\n          <label>\n            Address (please include city and state):\n            <input type=\"text\" name='location' value={this.state.location} onChange={this.handleChange} />\n          </label>\n          <label>\n            Max distance (in miles):\n            <input type=\"text\" name='radius' value={this.state.radius} onChange={this.handleChange} />\n          </label>\n          <input className=\"submit\" type=\"submit\" value=\"Submit\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nconst SignUpForm = (props) => {\n   return(\n    <Form />\n   )\n}\n \nexport default SignUpForm;","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n} from \"react-router-dom\";\nimport './index.scss';\nimport 'dotenv/config'\n\nimport Home from './app-components/home';\nimport Screenshotter from './app-components/screenshotter';\nimport SignUpForm from './app-components/sign-up-form';\n\nexport default class App extends React.PureComponent {\n  render() {\n    return (\n      <Router>\n        <Routes>\n          <Route exact path='/' element={<Home />} />\n          <Route exact path='/sign-up' element={<SignUpForm />} />\n          <Route exact path='/screenshot' element={<Screenshotter />} />\n        </Routes>\n      </Router>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.scss';\nimport 'dotenv/config'\nimport App from './App';\n\nconsole.log(process.env)\n\n \nReactDOM.render(\n<React.StrictMode>\n<App />\n</React.StrictMode>,\ndocument.getElementById('root')\n);"],"sourceRoot":""}